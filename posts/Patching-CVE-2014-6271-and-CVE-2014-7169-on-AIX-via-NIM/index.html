<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.3" /><meta property="og:title" content="Patching CVE-2014-6271 and CVE-2014-7169 on AIX via NIM (bash bug aka shellshock)" /><meta property="og:locale" content="en" /><meta name="description" content="Below I detail how I patched over 800 AIX LPAR’s that were exposed by CVE-2014-6271 and CVE-2014-7169, also known as shellshock, using the NIM server." /><meta property="og:description" content="Below I detail how I patched over 800 AIX LPAR’s that were exposed by CVE-2014-6271 and CVE-2014-7169, also known as shellshock, using the NIM server." /><link rel="canonical" href="https://blog.kristijan.org/posts/Patching-CVE-2014-6271-and-CVE-2014-7169-on-AIX-via-NIM/" /><meta property="og:url" content="https://blog.kristijan.org/posts/Patching-CVE-2014-6271-and-CVE-2014-7169-on-AIX-via-NIM/" /><meta property="og:site_name" content="Kristian’s Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2014-09-30T00:00:00+10:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Patching CVE-2014-6271 and CVE-2014-7169 on AIX via NIM (bash bug aka shellshock)" /><meta name="twitter:site" content="@Kristijan" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-06-04T21:34:40+10:00","datePublished":"2014-09-30T00:00:00+10:00","description":"Below I detail how I patched over 800 AIX LPAR’s that were exposed by CVE-2014-6271 and CVE-2014-7169, also known as shellshock, using the NIM server.","headline":"Patching CVE-2014-6271 and CVE-2014-7169 on AIX via NIM (bash bug aka shellshock)","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.kristijan.org/posts/Patching-CVE-2014-6271-and-CVE-2014-7169-on-AIX-via-NIM/"},"url":"https://blog.kristijan.org/posts/Patching-CVE-2014-6271-and-CVE-2014-7169-on-AIX-via-NIM/"}</script><title>Patching CVE-2014-6271 and CVE-2014-7169 on AIX via NIM (bash bug aka shellshock) | Kristian's Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Kristian's Blog"><meta name="application-name" content="Kristian's Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/images/kristian.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">Kristian's Blog</a></div><div class="site-subtitle font-italic">AIX | POWER | Puppet | Automation</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/Kristijan" aria-label="github" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> </a> <a href="https://infosec.exchange/@kristijan" aria-label="mastodon" target="_blank" rel="noopener noreferrer me"> <i class="fab fa-mastodon"></i> </a> <a href="javascript:location.href = 'mailto:' + ['kris','kristijan.org'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Patching CVE-2014-6271 and CVE-2014-7169 on AIX via NIM (bash bug aka shellshock)</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Patching CVE-2014-6271 and CVE-2014-7169 on AIX via NIM (bash bug aka shellshock)</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1411999200" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Sep 30, 2014 </em> </span> <span> Updated <em class="" data-ts="1654342480" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jun 4, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/Kristijan">Kristian Milos</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="978 words"> <em>5 min</em> read</span></div></div></div><div class="post-content"><p>Below I detail how I patched over 800 AIX LPAR’s that were exposed by <a href="http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-6271" target="_blank">CVE-2014-6271</a> and <a href="http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-7169" target="_blank">CVE-2014-7169</a>, also known as shellshock, using the NIM server.</p><p>From everything that I’ve been reading on IBM’s Knowledge Centre, creating an LPP source containing only RPM’s isn’t possible. To patch my AIX environment, I decided to use the <code class="language-plaintext highlighter-rouge">script</code> resource available to the NIM master, along with the pre-existing NFS mounts that I had configured.</p><ol><li><p>Configure NFS share.</p><div class="language-terminal highlighter-rouge"><div class="code-header"> <span data-label-text="Terminal"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="gp"> NIM:kristian#</span><span class="w"> </span><span class="nb">cat</span> /etc/exports
<span class="go"> /export/nim/images -ro,anon=0
    
</span><span class="gp"> NIM:kristian#</span><span class="w"> </span>showmount <span class="nt">-e</span>
<span class="go"> export list for NIM:
 /export/nim/images (everyone)
</span></pre></table></code></div></div><li><p>Download patched bash RPM to NIM master.</p><div class="language-terminal highlighter-rouge"><div class="code-header"> <span data-label-text="Terminal"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="gp"> NIM:kristian#</span><span class="w"> </span><span class="nb">ls</span> <span class="nt">-l</span> /export/nim/images/bash_CVE-2014-6271-7169
<span class="go"> total 3448
 -rw-r-----    1 root  system     1765643 Sep 30 08:22 bash-4.2-17.aix5.1.ppc.rpm
</span></pre></table></code></div></div><li><p>Script to patch bash <code class="language-plaintext filepath highlighter-rouge">/export/nim/patches/install_bash_CVE-2014-6271-7169</code></p><div file="/export/nim/patches/install_bash_CVE-2014-6271-7169" class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="/export/nim/patches/install_bash_CVE-2014-6271-7169"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre> <span class="c">#!/bin/ksh</span>
 <span class="c">#</span>
 <span class="c"># Script to install new version of bash to</span>
 <span class="c"># patch CVE-2014-6271 and CVE-2014-7169</span>
 <span class="c">#</span>
 <span class="c"># Kristian Milos (29/09/14)</span>
    
 <span class="c"># Get NIM master hostname</span>
 <span class="nv">NIM_MASTER_HOSTNAME</span><span class="o">=</span><span class="sb">`</span><span class="nb">grep </span>NIM_MASTER_HOSTNAME /etc/niminfo | <span class="nb">awk</span> <span class="nt">-F</span> <span class="o">=</span> <span class="s1">'{ print $2 }'</span><span class="sb">`</span>
    
 <span class="c"># Create temporary mount location</span>
 <span class="nb">mkdir</span> /install_bash_CVE-2014-6271-7169
    
 <span class="c"># NFS mount patch</span>
 mount <span class="k">${</span><span class="nv">NIM_MASTER_HOSTNAME</span><span class="k">}</span>:/export/nim/images/bash_CVE-2014-6271-7169 /install_bash_CVE-2014-6271-7169
    
 <span class="c"># Install patch</span>
 rpm <span class="nt">-Uvh</span> /install_bash_CVE-2014-6271-7169/bash-4.2-17.aix5.1.ppc.rpm
    
 <span class="c"># Unmount NFS mount</span>
 umount /install_bash_CVE-2014-6271-7169
    
 <span class="c"># Remove temporary mount location</span>
 <span class="nb">rm</span> <span class="nt">-r</span> /install_bash_CVE-2014-6271-7169
    
 <span class="nb">exit</span>
</pre></table></code></div></div><li><p>Define NIM resource</p><p>Now that we have the location of the RPM on the NIM master, and the script that will be run on the NIM client to patch bash, we can now define a NIM script resource.</p><div class="language-terminal highlighter-rouge"><div class="code-header"> <span data-label-text="Terminal"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="gp"> NIM:kristian#</span><span class="w"> </span>nim <span class="nt">-o</span> define <span class="nt">-t</span> script <span class="se">\</span>
<span class="go"> -a server=master \
 -a location=/export/nim/patches/install_bash_CVE-2014-6271-7169 \
 -a comments="bash fix for CVE-2014-6271 and CVE-2014-7169" bash_CVE-2014-6271-7169
    
</span><span class="gp"> NIM:kristian#</span><span class="w"> </span>lsnim <span class="nt">-l</span> bash_CVE-2014-6271-7169
<span class="go"> bash_CVE-2014-6271-7169:
 class       = resources
 type        = script
 comments    = bash fix for CVE-2014-6271 and CVE-2014-7169
 Rstate      = ready for use
 prev_state  = unavailable for use
 location    = /export/nim/patches/install_bash_CVE-2014-6271-7169
 alloc_count = 0
 server      = master
</span></pre></table></code></div></div><li><p>Define NIM machine group</p><p>We will now create a NIM machine group that will contain all the NIM clients that we will update. I find the easiest way to do this is by listing out all the NIM client definitions in the format required for the group define command. An example is shown below.</p><div class="language-terminal highlighter-rouge"><div class="code-header"> <span data-label-text="Terminal"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="gp"> NIM:kristian#</span><span class="w"> </span><span class="k">for </span>i <span class="k">in</span> <span class="sb">`</span>lsnim <span class="nt">-t</span> standalone | <span class="nb">awk</span> <span class="s1">'{ print $1 }'</span><span class="sb">`</span><span class="p">;</span> <span class="k">do </span><span class="nb">echo</span> <span class="s2">"-a add_member=</span><span class="nv">$i</span><span class="s2"> </span><span class="se">\\</span><span class="s2">"</span><span class="p">;</span> <span class="k">done</span>
<span class="go"> -a add_member=aix1 \
 -a add_member=aix2 \
 -a add_member=aix3 \
 -a add_member=aix4 \
 -a add_member=aix5 \
 -a add_member=aix6 \
</span></pre></table></code></div></div><p>Define the NIM group</p><div class="language-terminal highlighter-rouge"><div class="code-header"> <span data-label-text="Terminal"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="gp"> NIM:kristian#</span><span class="w"> </span>nim <span class="nt">-o</span> define <span class="nt">-t</span> mac_group <span class="se">\</span>
<span class="go"> -a add_member=aix1 \
 -a add_member=aix2 \
 -a add_member=aix3 \
 -a add_member=aix4 \
 -a add_member=aix5 \
 -a add_member=aix6 PROD_LPARS
</span></pre></table></code></div></div><li><p>Validate NIM master to client communications</p><p>The next thing I do is validate that the NIM master can actually talk to all the NIM clients in the machine group.</p><div class="language-terminal highlighter-rouge"><div class="code-header"> <span data-label-text="Terminal"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="gp"> NIM:kristian#</span><span class="w"> </span><span class="k">for </span>srv <span class="k">in</span> <span class="sb">`</span>lsnim <span class="nt">-g</span> PROD_LPARS | <span class="nb">grep </span>member | <span class="nb">grep</span> <span class="nt">-v</span> EXCLUDED | <span class="nb">awk</span> <span class="s1">'{ print $3 }'</span> | <span class="nb">sed</span> <span class="s1">'s/;//'</span> | <span class="nb">sort</span><span class="sb">`</span><span class="p">;</span> <span class="k">do </span><span class="nb">printf</span> <span class="s2">"%-20s"</span> <span class="nv">$srv</span><span class="p">;</span> nim <span class="nt">-o</span> lslpp <span class="nv">$srv</span> <span class="o">&gt;</span>/dev/null 2&gt;&amp;1<span class="p">;</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$?</span><span class="s2">"</span> <span class="o">==</span> 0 <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">echo </span>OK <span class="o">||</span> <span class="nb">echo</span> <span class="s2">"Problem"</span><span class="p">;</span> <span class="k">done</span>
<span class="go"> aix1            OK
 aix2            OK
 aix3            OK
 aix4            OK
 aix5            Problem
 aix6            OK
</span></pre></table></code></div></div><li><p>Exclude uncontactable hosts</p><p>For any NIM client that returns “Problem”, I exclude them from the NIM group operation</p><div class="language-terminal highlighter-rouge"><div class="code-header"> <span data-label-text="Terminal"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp"> NIM:kristian#</span><span class="w"> </span>nim <span class="nt">-o</span> <span class="k">select</span> <span class="nt">-a</span> <span class="nv">exclude</span><span class="o">=</span>aix5 PROD_LPARS
</pre></table></code></div></div><li><p>Patch all NIM clients via NIM master</p><p>We’re now in a position to execute the patch across all the NIM clients listed in the group definition.</p><div class="language-terminal highlighter-rouge"><div class="code-header"> <span data-label-text="Terminal"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
</pre><td class="rouge-code"><pre><span class="gp"> NIM:kristian#</span><span class="w"> </span>nim <span class="nt">-o</span> cust <span class="nt">-a</span> <span class="nv">script</span><span class="o">=</span>bash_CVE-2014-6271-7169 <span class="nt">-a</span> <span class="nv">concurrent</span><span class="o">=</span>10 PROD_LPARS
<span class="go"> +-----------------------------------------------------------------------------+
                     Concurrency Control
 +-----------------------------------------------------------------------------+
    
 Processing will begin with the first 5 machines from the group...
    
 +-----------------------------------------------------------------------------+
                     Initiating "cust" Operation
 +-----------------------------------------------------------------------------+
 Allocating resources ...
    
 Initiating the cust operation on machine 1 of 5: aix1 ...
    
 Initiating the cust operation on machine 2 of 5: aix2 ...
    
 Initiating the cust operation on machine 3 of 5: aix3 ...
    
 Initiating the cust operation on machine 4 of 5: aix4 ...
    
 Initiating the cust operation on machine 5 of 5: aix6 ...
    
 +-----------------------------------------------------------------------------+
                     "cust" Operation Summary
 +-----------------------------------------------------------------------------+
 Target                  Result
 ------                  ------
 aix1                    INITIATED
 aix2                    INITIATED
 aix3                    INITIATED
 aix4                    INITIATED
 aix6                    INITIATED
    
 Note: Use the lsnim command to monitor progress of "INITIATED"
 targets by viewing their NIM database definition.
    
 +-----------------------------------------------------------------------------+
                     Concurrency Control
 +-----------------------------------------------------------------------------+
 The first 8 machines have been processed.  As machines finish
 installing processing will resume with the remaining members
 of the group, one at a time.
    
 +-----------------------------------------------------------------------------+
                     Concurrency Control: "cust" Operation Summary
 +-----------------------------------------------------------------------------+
 Target                  Result
 ------                  ------
 aix1                    COMPLETE
 aix2                    COMPLETE
 aix3                    COMPLETE
 aix4                    COMPLETE
 aix6                    COMPLETE
</span></pre></table></code></div></div><li><p>Validate installed version of bash</p><p>Once the process has completed, you can validate the version of bash installed across all NIM clients by running the following command.</p><div class="language-terminal highlighter-rouge"><div class="code-header"> <span data-label-text="Terminal"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="gp"> NIM:kristian#</span><span class="w"> </span><span class="k">for </span>i <span class="k">in</span> <span class="sb">`</span>lsnim <span class="nt">-g</span> PROD_LPARS | <span class="nb">grep </span>member | <span class="nb">grep</span> <span class="nt">-v</span> EXCLUDED | <span class="nb">awk</span> <span class="s1">'{ print $3 }'</span> | <span class="nb">sed</span> <span class="s1">'s/;//'</span> | <span class="nb">sort</span><span class="sb">`</span><span class="p">;</span> <span class="k">do </span><span class="nb">echo</span> <span class="nv">$i</span><span class="p">;</span> nim <span class="nt">-o</span> lslpp <span class="nt">-a</span> <span class="nv">lslpp_flags</span><span class="o">=</span><span class="nt">-Lc</span> <span class="nt">-a</span> <span class="nv">filesets</span><span class="o">=</span>bash <span class="nv">$i</span> | <span class="nb">grep </span>bash | <span class="nb">awk</span> <span class="nt">-F</span> : <span class="s1">'{ print $2 }'</span><span class="p">;</span> <span class="nb">echo</span> <span class="s2">""</span><span class="p">;</span> <span class="k">done</span>
<span class="go"> aix1
 bash-4.2-17
    
 aix2
 bash-4.2-17
    
 aix3
 bash-4.2-17
    
 aix4
 bash-4.2-17
    
 aix6
 bash-4.2-17
</span></pre></table></code></div></div><li><p>Include previously excluded NIM members</p><p>One final clean up task, is to ensure you include all NIM members back into the group if you excluded them previously.</p><div class="language-terminal highlighter-rouge"><div class="code-header"> <span data-label-text="Terminal"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">NIM:kristian#</span><span class="w"> </span>nim <span class="nt">-o</span> <span class="k">select</span> <span class="nt">-a</span> <span class="nv">include_all</span><span class="o">=</span><span class="nb">yes </span>PROD_LPARS
</pre></table></code></div></div></ol></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/aix/'>aix</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/aix/" class="post-tag no-text-decoration" >aix</a> <a href="/tags/nim/" class="post-tag no-text-decoration" >nim</a> <a href="/tags/scripting/" class="post-tag no-text-decoration" >scripting</a> <a href="/tags/shell/" class="post-tag no-text-decoration" >shell</a> <a href="/tags/shell-scripting/" class="post-tag no-text-decoration" >shell-scripting</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Patching%20CVE-2014-6271%20and%20CVE-2014-7169%20on%20AIX%20via%20NIM%20(bash%20bug%20aka%20shellshock)%20-%20Kristian's%20Blog&url=https%3A%2F%2Fblog.kristijan.org%2Fposts%2FPatching-CVE-2014-6271-and-CVE-2014-7169-on-AIX-via-NIM%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Patching%20CVE-2014-6271%20and%20CVE-2014-7169%20on%20AIX%20via%20NIM%20(bash%20bug%20aka%20shellshock)%20-%20Kristian's%20Blog&u=https%3A%2F%2Fblog.kristijan.org%2Fposts%2FPatching-CVE-2014-6271-and-CVE-2014-7169-on-AIX-via-NIM%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fblog.kristijan.org%2Fposts%2FPatching-CVE-2014-6271-and-CVE-2014-7169-on-AIX-via-NIM%2F&text=Patching%20CVE-2014-6271%20and%20CVE-2014-7169%20on%20AIX%20via%20NIM%20(bash%20bug%20aka%20shellshock)%20-%20Kristian's%20Blog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/2024-01-17-AIX-VIOS-security-advisories/"></a><li><a href="/posts/HMC-profile-diff/">HMC Profile Diff</a><li><a href="/posts/AIX-paging-space/">AIX paging space</a><li><a href="/posts/Deploying-AIX-eFixes-using-NIM-at-scale-with-Puppet/">Deploying AIX eFixes using NIM at scale with Puppet</a><li><a href="/posts/LPAR-WWPNs-from-the-HMC/">Display client LPAR WWPNs from the HMC</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/aix/">aix</a> <a class="post-tag" href="/tags/scripting/">scripting</a> <a class="post-tag" href="/tags/shell-scripting/">shell-scripting</a> <a class="post-tag" href="/tags/shell/">shell</a> <a class="post-tag" href="/tags/hmc/">hmc</a> <a class="post-tag" href="/tags/nim/">nim</a> <a class="post-tag" href="/tags/powerha/">powerha</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/storage/">storage</a> <a class="post-tag" href="/tags/2700/">2700</a></div></div></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Automatically-reduce-image.data-to-a-single-PV/"><div class="card-body"> <em class="small" data-ts="1333461600" data-df="ll" > Apr 4, 2012 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Automatically reduce image.data to a single PV</h3><div class="text-muted small"><p> I’ve been working with a client who is going through the process of migrating from physical Power 5 servers to a virtualized Power 7 environment with PowerVM. Due to the I/O limitations in the P5 s...</p></div></div></a></div><div class="card"> <a href="/posts/HMC-Elastic-CoD-detail-function/"><div class="card-body"> <em class="small" data-ts="1447851600" data-df="ll" > Nov 19, 2015 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>HMC Elastic CoD detail function</h3><div class="text-muted small"><p> IBM have created a self-service portal for its customers to allow them to request their own Elastic Capacity on Demand codes for their registered systems. In my time using the new website, the code...</p></div></div></a></div><div class="card"> <a href="/posts/LPAR-WWPNs-from-the-HMC/"><div class="card-body"> <em class="small" data-ts="1660312800" data-df="ll" > Aug 13, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Display client LPAR WWPNs from the HMC</h3><div class="text-muted small"><p> There are several ways to find the WWPNs for a virtual fibre channel adapter. You can log into the individual LPAR’s, get them from the Hardware Management Console (HMC), or from another asset disc...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/AIX-boot-hangs-with-HMC-2700-LED-code/" class="btn btn-outline-primary" prompt="Older"><p>AIX boot hangs with HMC 2700 LED code</p></a> <a href="/posts/PowerHA-SystemMirror-and-NIM-mksysb-failures/" class="btn btn-outline-primary" prompt="Newer"><p>PowerHA SystemMirror and NIM mksysb failures</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "Kristijan/blog", "data-repo-id": "R_kgDOHbe9gg", "data-category": "General", "data-category-id": "DIC_kwDOHbe9gs4CPdgt", "data-mapping": "pathname", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "bottom", "data-lang": "en", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/aix/">aix</a> <a class="post-tag" href="/tags/scripting/">scripting</a> <a class="post-tag" href="/tags/shell-scripting/">shell-scripting</a> <a class="post-tag" href="/tags/shell/">shell</a> <a class="post-tag" href="/tags/hmc/">hmc</a> <a class="post-tag" href="/tags/nim/">nim</a> <a class="post-tag" href="/tags/powerha/">powerha</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/storage/">storage</a> <a class="post-tag" href="/tags/2700/">2700</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://github.com/Kristijan">Kristian Milos</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0">Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script>
