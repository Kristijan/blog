<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.3" /><meta property="og:title" content="Deploying AIX eFixes using NIM at scale with Puppet" /><meta property="og:locale" content="en" /><meta name="description" content="Most will be familiar with using the emgr command to install emergency fixes (eFixes) on AIX. You can additionally use a Network Installation Management (NIM) server in either a push or pull operation to install fixes, which is handy when deploying at scale (more on this later in the post with deploying fixes at scale with Puppet)." /><meta property="og:description" content="Most will be familiar with using the emgr command to install emergency fixes (eFixes) on AIX. You can additionally use a Network Installation Management (NIM) server in either a push or pull operation to install fixes, which is handy when deploying at scale (more on this later in the post with deploying fixes at scale with Puppet)." /><link rel="canonical" href="https://blog.kristijan.org/posts/Deploying-AIX-eFixes-using-NIM-at-scale-with-Puppet/" /><meta property="og:url" content="https://blog.kristijan.org/posts/Deploying-AIX-eFixes-using-NIM-at-scale-with-Puppet/" /><meta property="og:site_name" content="Kristian’s Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-09-10T00:00:00+10:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Deploying AIX eFixes using NIM at scale with Puppet" /><meta name="twitter:site" content="@Kristijan" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-09-10T10:01:08+10:00","datePublished":"2022-09-10T00:00:00+10:00","description":"Most will be familiar with using the emgr command to install emergency fixes (eFixes) on AIX. You can additionally use a Network Installation Management (NIM) server in either a push or pull operation to install fixes, which is handy when deploying at scale (more on this later in the post with deploying fixes at scale with Puppet).","headline":"Deploying AIX eFixes using NIM at scale with Puppet","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.kristijan.org/posts/Deploying-AIX-eFixes-using-NIM-at-scale-with-Puppet/"},"url":"https://blog.kristijan.org/posts/Deploying-AIX-eFixes-using-NIM-at-scale-with-Puppet/"}</script><title>Deploying AIX eFixes using NIM at scale with Puppet | Kristian's Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Kristian's Blog"><meta name="application-name" content="Kristian's Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/images/kristian.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">Kristian's Blog</a></div><div class="site-subtitle font-italic">AIX | POWER | Puppet | Automation</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/Kristijan" aria-label="github" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> </a> <a href="https://infosec.exchange/@kristijan" aria-label="mastodon" target="_blank" rel="noopener noreferrer me"> <i class="fab fa-mastodon"></i> </a> <a href="javascript:location.href = 'mailto:' + ['kris','kristijan.org'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Deploying AIX eFixes using NIM at scale with Puppet</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Deploying AIX eFixes using NIM at scale with Puppet</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1662732000" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Sep 10, 2022 </em> </span> <span> Updated <em class="" data-ts="1662768068" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Sep 10, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/Kristijan">Kristian Milos</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1214 words"> <em>6 min</em> read</span></div></div></div><div class="post-content"><p>Most will be familiar with using the <code class="language-plaintext highlighter-rouge">emgr</code> command to install emergency fixes (eFixes) on AIX. You can additionally use a Network Installation Management <a href="https://www.ibm.com/docs/en/aix/7.2?topic=installing-network-installation-management" target="_blank">(NIM)</a> server in either a push or pull operation to install fixes, which is handy when deploying at scale (more on this later in the post with deploying fixes at scale with Puppet).</p><h2 id="prepare-nim-resources"><span class="mr-2">Prepare NIM resources</span><a href="#prepare-nim-resources" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>There is a little setup work that you first need to perform on the NIM server to make this possible. At a minimum, on the NIM server, you will require a lpp_source resource to place the fixes in. Creating a lpp_source resource is outside the scope of this post, but you can find additional information <a href="https://www.ibm.com/docs/en/aix/7.2?topic=resource-defining-lpp-source" target="_blank">here</a>.</p><div class="language-terminal highlighter-rouge"><div class="code-header"> <span data-label-text="Terminal"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="gp">(nim01) #</span><span class="w"> </span>lsnim <span class="nt">-l</span> 7200TL5SP4_lpp
<span class="go">7200TL5SP4_lpp:
   class       = resources
   type        = lpp_source
   comments    = AIX 7.2 TL5 SP4 lppsource
   arch        = power
   Rstate      = ready for use
   prev_state  = unavailable for use
   location    = /nim/lpp/7200TL5SP4_lpp
   simages     = yes
   alloc_count = 0
   server      = master
</span><span class="gp">(nim01) #</span><span class="w"> </span><span class="nb">ls</span> <span class="nt">-l</span> /nim/lpp/7200TL5SP4_lpp/emgr/ppc
<span class="go">total 64320
-rw-r--r--    1 root     system     28191901 Aug 16 00:49 1121201a.220804.epkg.Z
-rw-r--r--    1 root     system        49935 Jun 11 03:37 IJ39876s3a.220506.epkg.Z
-rw-r--r--    1 root     system      4683895 Aug 15 16:08 IJ41139m4a.220809.epkg.Z
</span></pre></table></code></div></div><p>Optionally, if you’re installing multiple fixes at the same time, you can create a NIM installp_bundle resource. Creating an installp_bundle resource is outside the scope of this post, but you can find additional information <a href="https://www.ibm.com/docs/en/aix/7.2?topic=resource-defining-installp-bundle" target="_blank">here</a>.</p><div class="language-terminal highlighter-rouge"><div class="code-header"> <span data-label-text="Terminal"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="gp">(nim01) #</span><span class="w"> </span>lsnim <span class="nt">-l</span> 7200TL5SP4_emgr
<span class="go">7200TL5SP4_emgr:
   class       = resources
   type        = installp_bundle
   comments    = AIX 7.2 TL5 SP4 emgr_bundle
   Rstate      = ready for use
   prev_state  = unavailable for use
   location    = /nim/bundles/7200TL5SP4_emgr
   alloc_count = 0
   server      = master
</span></pre></table></code></div></div><p>Contents of <code class="language-plaintext filepath highlighter-rouge">/nim/bundles/7200TL5SP4_emgr</code></p><div file="/nim/bundles/7200TL5SP4_emgr" class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="/nim/bundles/7200TL5SP4_emgr"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>E:IJ39876s3a.220506.epkg.Z
E:IJ41139m4a.220809.epkg.Z
E:1121201a.220804.epkg.Z
</pre></table></code></div></div><h2 id="installing-fixes-on-aix-hosts"><span class="mr-2">Installing fixes on AIX hosts</span><a href="#installing-fixes-on-aix-hosts" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>You have two options when it comes to installing the fixes onto AIX hosts using the NIM server. You can either push the fixes from the NIM server to the AIX host, or you can pull the fixes from the AIX host.</p><h3 id="push"><span class="mr-2">Push</span><a href="#push" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Installing a single fix from a NIM lpp_source resource.</p><div class="language-terminal highlighter-rouge"><div class="code-header"> <span data-label-text="Terminal"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="gp">(nim01) #</span><span class="w"> </span>nim <span class="nt">-o</span> cust <span class="nt">-a</span> <span class="nv">lpp_source</span><span class="o">=</span>7200TL5SP4_lpp <span class="nt">-a</span> <span class="nv">filesets</span><span class="o">=</span>E:1121201a.220804.epkg.Z aix01
<span class="go">
Initializing log /var/adm/ras/emgr.log ...
EPKG NUMBER       LABEL               OPERATION              RESULT
===========       ==============      =================      ==============
1                 1121201a            INSTALL                SUCCESS
Return Status = SUCCESS
</span></pre></table></code></div></div><p>Installing multiple fixes from a NIM installp_bundle resource.</p><div class="language-terminal highlighter-rouge"><div class="code-header"> <span data-label-text="Terminal"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="gp">(nim01) #</span><span class="w"> </span>nim <span class="nt">-o</span> cust <span class="nt">-a</span> <span class="nv">lpp_source</span><span class="o">=</span>7200TL5SP4_lpp <span class="nt">-a</span> <span class="nv">installp_bundle</span><span class="o">=</span>7200TL5SP4_emgr aix01
<span class="go">
Initializing log /var/adm/ras/emgr.log ...
EPKG NUMBER       LABEL               OPERATION              RESULT
===========       ==============      =================      ==============
1                 IJ39876s3a          INSTALL                SUCCESS
2                 IJ41139m4a          INSTALL                SUCCESS
3                 1121201a            INSTALL                SUCCESS
Return Status = SUCCESS
</span></pre></table></code></div></div><h3 id="pull"><span class="mr-2">Pull</span><a href="#pull" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Installing a single fix from a NIM lpp_source resource.</p><div class="language-terminal highlighter-rouge"><div class="code-header"> <span data-label-text="Terminal"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="gp">(aix01) #</span><span class="w"> </span>nimclient <span class="nt">-o</span> cust <span class="nt">-a</span> <span class="nv">lpp_source</span><span class="o">=</span>7200TL5SP4_lpp <span class="nt">-a</span> <span class="nv">filesets</span><span class="o">=</span>E:1121201a.220804.epkg.Z
<span class="go">
Initializing log /var/adm/ras/emgr.log ...
EPKG NUMBER       LABEL               OPERATION              RESULT
===========       ==============      =================      ==============
1                 1121201a            INSTALL                SUCCESS
Return Status = SUCCESS
</span></pre></table></code></div></div><p>Installing multiple fixes from a NIM installp_bundle resource.</p><div class="language-terminal highlighter-rouge"><div class="code-header"> <span data-label-text="Terminal"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="gp">(aix01) #</span><span class="w"> </span>nimclient <span class="nt">-o</span> cust <span class="nt">-a</span> <span class="nv">lpp_source</span><span class="o">=</span>7200TL5SP4_lpp <span class="nt">-a</span> <span class="nv">installp_bundle</span><span class="o">=</span>7200TL5SP4_emgr
<span class="go">
Initializing log /var/adm/ras/emgr.log ...
EPKG NUMBER       LABEL               OPERATION              RESULT
===========       ==============      =================      ==============
1                 IJ39876s3a          INSTALL                SUCCESS
2                 IJ41139m4a          INSTALL                SUCCESS
3                 1121201a            INSTALL                SUCCESS
Return Status = SUCCESS
</span></pre></table></code></div></div><h2 id="deploying-fixes-at-scale-with-puppet-tasks"><span class="mr-2">Deploying fixes at scale with Puppet Tasks</span><a href="#deploying-fixes-at-scale-with-puppet-tasks" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>If you’re using Puppet Enterprise, and can use Puppet Tasks, here is one that allows you to install both a single fix, or multiple fixes using the above mentioned methods.</p><h3 id="task-metadata"><span class="mr-2">Task metadata</span><a href="#task-metadata" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A task for installing/uninstalling AIX fixes."</span><span class="p">,</span><span class="w">
    </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"install"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Set to true to install efix, or set to false to uninstall efix."</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Boolean"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"lpp_source"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NIM lpp_source containing the efix(s)."</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"String[1]"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"fix_name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Name of a single efix to be installed/uninstalled.</span><span class="se">\n\t</span><span class="s2">When installing, the 'fix_name' is the name of the package (e.g. IJ31191m1a.210322.epkg.Z).</span><span class="se">\n\t</span><span class="s2">When uninstalling, the 'fix_name' is the name of the label (e.g. IJ31191m1a)."</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Optional[String[1]]"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"installp_bundle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Name of installp_bundle to use when installing multiple efixes."</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Optional[String[1]]"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"reboot"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"If true, the system is rebooted after installing/uninstalling the efix(s)."</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Boolean"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"puppet_task_version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"supports_noop"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><h3 id="task"><span class="mr-2">Task</span><a href="#task" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-ruby highlighter-rouge"><div class="code-header"> <span data-label-text="Ruby"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
</pre><td class="rouge-code"><pre><span class="c1">#!/opt/puppetlabs/puppet/bin/ruby</span>
<span class="c1">#</span>
<span class="c1"># A task for installing/uninstalling AIX fixes</span>
<span class="nb">require</span> <span class="s1">'puppet'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="c1"># Set FACTERLIB so custom facts resolve</span>
<span class="no">Puppet</span><span class="p">.</span><span class="nf">initialize_settings</span>
<span class="no">ENV</span><span class="p">[</span><span class="s1">'FACTERLIB'</span><span class="p">]</span> <span class="o">=</span> <span class="no">Puppet</span><span class="p">.</span><span class="nf">settings</span><span class="p">[</span><span class="s1">'factpath'</span><span class="p">]</span>
<span class="nb">require</span> <span class="s1">'facter'</span>

<span class="c1"># Sanity check that we're an AIX host</span>
<span class="k">if</span> <span class="no">Facter</span><span class="p">.</span><span class="nf">value</span><span class="p">(</span><span class="ss">:operatingsystem</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"AIX"</span> <span class="k">then</span>
    <span class="n">params</span>          <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="no">STDIN</span><span class="p">.</span><span class="nf">read</span><span class="p">)</span>
    <span class="n">install</span>         <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s1">'install'</span><span class="p">]</span>
    <span class="n">lpp_source</span>      <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s1">'lpp_source'</span><span class="p">]</span>
    <span class="n">fix_name</span>        <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s1">'fix_name'</span><span class="p">]</span>
    <span class="n">installp_bundle</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s1">'installp_bundle'</span><span class="p">]</span>
    <span class="n">reboot</span>          <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s1">'reboot'</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">install</span> <span class="k">then</span>
        <span class="c1"># Check if we have either a fix_name or installp_bundle set</span>
        <span class="k">if</span> <span class="n">params</span><span class="p">.</span><span class="nf">key?</span><span class="p">(</span><span class="s2">"installp_bundle"</span><span class="p">)</span> <span class="k">then</span>
            <span class="n">fix</span> <span class="o">=</span> <span class="s2">"installp_bundle=</span><span class="si">#{</span><span class="n">installp_bundle</span><span class="si">}</span><span class="s2">"</span>
        <span class="k">elsif</span> <span class="n">params</span><span class="p">.</span><span class="nf">key?</span><span class="p">(</span><span class="s2">"fix_name"</span><span class="p">)</span> <span class="k">then</span>
            <span class="n">fix</span> <span class="o">=</span> <span class="s2">"filesets=E:</span><span class="si">#{</span><span class="n">fix_name</span><span class="si">}</span><span class="s2">"</span>
        <span class="k">else</span>
            <span class="nb">print</span> <span class="s2">"You need to specify either a fix_name or installp_bundle."</span>
            <span class="nb">exit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">end</span>

        <span class="c1"># Install efix(s)</span>
        <span class="nb">system</span><span class="p">(</span><span class="s2">"/usr/sbin/nimclient"</span><span class="p">,</span> <span class="s2">"-o"</span><span class="p">,</span> <span class="s2">"cust"</span><span class="p">,</span> <span class="s2">"-a"</span><span class="p">,</span> <span class="s2">"lpp_source=</span><span class="si">#{</span><span class="n">lpp_source</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="s2">"-a"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="n">fix</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        <span class="k">if</span> <span class="vg">$?</span><span class="p">.</span><span class="nf">exitstatus</span> <span class="o">!=</span> <span class="mi">0</span>
            <span class="nb">print</span> <span class="s2">"efix failed to install."</span>
            <span class="nb">exit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">end</span>
    <span class="k">else</span>
        <span class="c1"># Uninstall efix</span>
        <span class="k">if</span> <span class="n">params</span><span class="p">.</span><span class="nf">key?</span><span class="p">(</span><span class="s2">"fix_name"</span><span class="p">)</span> <span class="k">then</span>
            <span class="nb">system</span><span class="p">(</span><span class="s2">"/usr/sbin/nimclient"</span><span class="p">,</span> <span class="s2">"-o"</span><span class="p">,</span> <span class="s2">"cust"</span><span class="p">,</span> <span class="s2">"-a"</span><span class="p">,</span> <span class="s2">"lpp_source=</span><span class="si">#{</span><span class="n">lpp_source</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="s2">"-a"</span><span class="p">,</span> <span class="s2">"filesets=E:</span><span class="si">#{</span><span class="n">fix_name</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="s2">"-a"</span><span class="p">,</span> <span class="s2">"installp_flags=u"</span><span class="p">)</span>
            <span class="k">if</span> <span class="vg">$?</span><span class="p">.</span><span class="nf">exitstatus</span> <span class="o">!=</span> <span class="mi">0</span>
                <span class="nb">print</span> <span class="s2">"efix failed to uninstall."</span>
                <span class="nb">exit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
            <span class="k">end</span>
        <span class="k">else</span>
            <span class="nb">print</span> <span class="s2">"You need to specify a fix_name to uninstall."</span>
        <span class="k">end</span>
    <span class="k">end</span>

    <span class="c1"># Reboot</span>
    <span class="k">if</span> <span class="n">reboot</span> <span class="k">then</span>
        <span class="nb">system</span><span class="p">(</span><span class="s2">"/usr/bin/echo '/usr/sbin/shutdown -r +3' | /usr/bin/at now"</span><span class="p">)</span>
    <span class="k">end</span>
<span class="k">else</span>
  <span class="nb">print</span> <span class="s2">"Task only supported on AIX."</span>
  <span class="nb">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">end</span>
</pre></table></code></div></div><h3 id="running-the-task"><span class="mr-2">Running the Task</span><a href="#running-the-task" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-terminal highlighter-rouge"><div class="code-header"> <span data-label-text="Terminal"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre><td class="rouge-code"><pre><span class="gp">$</span><span class="w"> </span>puppet task show patch::aix_efix
<span class="go">
patch::aix_efix - A task for installing/uninstalling AIX fixes.

USAGE:
</span><span class="gp">$</span><span class="w"> </span>puppet task run patch::aix_efix <span class="nb">install</span><span class="o">=</span>&lt;value&gt; <span class="nv">lpp_source</span><span class="o">=</span>&lt;value&gt; <span class="nv">reboot</span><span class="o">=</span>&lt;value&gt; <span class="o">[</span><span class="nv">fix_name</span><span class="o">=</span>&lt;value&gt;] <span class="o">[</span><span class="nv">installp_bundle</span><span class="o">=</span>&lt;value&gt;] &lt;<span class="o">[</span><span class="nt">--nodes</span>, <span class="nt">-n</span> &lt;node-names&gt;] | <span class="o">[</span><span class="nt">--query</span>, <span class="nt">-q</span> &lt;<span class="s1">'query'</span><span class="o">&gt;]&gt;</span>
<span class="go">
PARAMETERS:
- install : Boolean
    Set to true to install efix, or set to false to uninstall efix.
- lpp_source : String[1]
    NIM lpp_source containing the efix(s).
- reboot : Boolean
    If true, the system is rebooted after installing/uninstalling the efix(s).
- fix_name : Optional[String[1]]
    Name of a single efix to be installed/uninstalled.
        When installing, the 'fix_name' is the name of the package (e.g. IJ31191m1a.210322.epkg.Z).
        When uninstalling, the 'fix_name' is the name of the label (e.g. IJ31191m1a).
- installp_bundle : Optional[String[1]]
    Name of installp_bundle to use when installing multiple efixes.

</span><span class="gp">$</span><span class="w"> </span>puppet task run patch::aix_efix <span class="nb">install</span><span class="o">=</span><span class="nb">true </span><span class="nv">lpp_source</span><span class="o">=</span>7200TL5SP4_lpp <span class="nv">reboot</span><span class="o">=</span><span class="nb">false </span><span class="nv">installp_bundle</span><span class="o">=</span>7200TL5SP4_emgr <span class="nt">-n</span> aix01
<span class="go">Starting job ...
Note: The task will run only on permitted nodes.
New job ID: 83786
Nodes: 1

Started on aix01 ...
Finished on node aix01
  STDOUT:

    Initializing log /var/adm/ras/emgr.log ...
    EPKG NUMBER       LABEL               OPERATION              RESULT
    ===========       ==============      =================      ==============
    1                 IJ39876s3a          INSTALL                SUCCESS
    2                 IJ41139m4a          INSTALL                SUCCESS
    3                 1121201a            INSTALL                SUCCESS
    Return Status = SUCCESS

Job completed. 1/1 nodes succeeded.
Duration: 1 min, 3 sec
</span></pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/aix/'>aix</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/aix/" class="post-tag no-text-decoration" >aix</a> <a href="/tags/nim/" class="post-tag no-text-decoration" >nim</a> <a href="/tags/puppet/" class="post-tag no-text-decoration" >puppet</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Deploying%20AIX%20eFixes%20using%20NIM%20at%20scale%20with%20Puppet%20-%20Kristian's%20Blog&url=https%3A%2F%2Fblog.kristijan.org%2Fposts%2FDeploying-AIX-eFixes-using-NIM-at-scale-with-Puppet%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Deploying%20AIX%20eFixes%20using%20NIM%20at%20scale%20with%20Puppet%20-%20Kristian's%20Blog&u=https%3A%2F%2Fblog.kristijan.org%2Fposts%2FDeploying-AIX-eFixes-using-NIM-at-scale-with-Puppet%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fblog.kristijan.org%2Fposts%2FDeploying-AIX-eFixes-using-NIM-at-scale-with-Puppet%2F&text=Deploying%20AIX%20eFixes%20using%20NIM%20at%20scale%20with%20Puppet%20-%20Kristian's%20Blog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/2024-01-17-AIX-VIOS-security-advisories/"></a><li><a href="/posts/HMC-profile-diff/">HMC Profile Diff</a><li><a href="/posts/AIX-paging-space/">AIX paging space</a><li><a href="/posts/Deploying-AIX-eFixes-using-NIM-at-scale-with-Puppet/">Deploying AIX eFixes using NIM at scale with Puppet</a><li><a href="/posts/LPAR-WWPNs-from-the-HMC/">Display client LPAR WWPNs from the HMC</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/aix/">aix</a> <a class="post-tag" href="/tags/scripting/">scripting</a> <a class="post-tag" href="/tags/shell-scripting/">shell-scripting</a> <a class="post-tag" href="/tags/shell/">shell</a> <a class="post-tag" href="/tags/hmc/">hmc</a> <a class="post-tag" href="/tags/nim/">nim</a> <a class="post-tag" href="/tags/powerha/">powerha</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/storage/">storage</a> <a class="post-tag" href="/tags/2700/">2700</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc"></nav></div><script src="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.js"></script></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Patching-CVE-2014-6271-and-CVE-2014-7169-on-AIX-via-NIM/"><div class="card-body"> <em class="small" data-ts="1411999200" data-df="ll" > Sep 30, 2014 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Patching CVE-2014-6271 and CVE-2014-7169 on AIX via NIM (bash bug aka shellshock)</h3><div class="text-muted small"><p> Below I detail how I patched over 800 AIX LPAR’s that were exposed by CVE-2014-6271 and CVE-2014-7169, also known as shellshock, using the NIM server. From everything that I’ve been reading on IBM...</p></div></div></a></div><div class="card"> <a href="/posts/PowerHA-SystemMirror-and-NIM-mksysb-failures/"><div class="card-body"> <em class="small" data-ts="1424178000" data-df="ll" > Feb 18, 2015 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>PowerHA SystemMirror and NIM mksysb failures</h3><div class="text-muted small"><p> I built a basic two-node PowerHA SystemMirror (HACMP) cluster for my team a little while ago to use as a test environment for patch updates. While it wasn’t a true reflection of how the production ...</p></div></div></a></div><div class="card"> <a href="/posts/Migrating-from-SDDPCM-to-AIXPCM/"><div class="card-body"> <em class="small" data-ts="1532872800" data-df="ll" > Jul 30, 2018 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Migrating from SDDPCM to AIXPCM (the easy way)</h3><div class="text-muted small"><p> For a while now, IBM have diverted their efforts in storage multipathing from SDDPCM to the default AIX PCM. This brings a few advantages, but specifically for me, it means the driver is now update...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/LPAR-WWPNs-from-the-HMC/" class="btn btn-outline-primary" prompt="Older"><p>Display client LPAR WWPNs from the HMC</p></a> <a href="/posts/AIX-paging-space/" class="btn btn-outline-primary" prompt="Newer"><p>AIX paging space</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "Kristijan/blog", "data-repo-id": "R_kgDOHbe9gg", "data-category": "General", "data-category-id": "DIC_kwDOHbe9gs4CPdgt", "data-mapping": "pathname", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "bottom", "data-lang": "en", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/aix/">aix</a> <a class="post-tag" href="/tags/scripting/">scripting</a> <a class="post-tag" href="/tags/shell-scripting/">shell-scripting</a> <a class="post-tag" href="/tags/shell/">shell</a> <a class="post-tag" href="/tags/hmc/">hmc</a> <a class="post-tag" href="/tags/nim/">nim</a> <a class="post-tag" href="/tags/powerha/">powerha</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/storage/">storage</a> <a class="post-tag" href="/tags/2700/">2700</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://github.com/Kristijan">Kristian Milos</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0">Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script>
